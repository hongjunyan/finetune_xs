{"prompt": "營業槓桿在XS上要怎麼寫？\n\n###\n\n", "completion": " XQ有提供 營業利益 和 營業收入淨額 這兩個欄位。\n\n您可以用此來計算。\n\n舉例來說:\n\nvalue1 = (GetField(\"營業利益\") - GetField(\"營業利益\")[1]) / GetField(\"營業利益\");\n\nvalue2 = (GetField(\"營業收入淨額\") - GetField(\"營業收入淨額\")[1]) / GetField(\"營業收入淨額\");\n\nvalue3 = value1 / value2;\n\n \n\n其中 value1 就是營業利益變動數，value2 就是營業收入變動數。###"}
{"prompt": "請問有關MACD背離語法架構?\n\n###\n\n", "completion": " 您可以參考內建的背離相關腳本。\n\n小幫手覺得最簡單的方式是使用 LinearRegSlope 計算 OSC 和 收盤價 的斜率，若兩者相反的話則為背離。\n\n至於您圖上標地點應該是希望能找出創高價且為轉折點的價格，可以參考 SwingHigh 函數來判斷，並搭配 SwingHighBar 取得相對位置。###"}
{"prompt": "請問若是要寫近20天30分K創最大量的警示要如何寫呢?\n\n###\n\n", "completion": " 您可以先計算20天總共有多少30分鐘Bar (20 * 9)，接著再用 highest 函數抓取最大值用來判斷即可。\n\n舉例來說：\n\nvalue1 = highest(volume[1], 180);   //不包含當根Bar的過去180根Bar最大成交量\n\nif volume > value1 then ret = 1;    //當根成交量大於過去180根Bar最大成交量的話警示\n\n \n\n網站上有教學區，裡面有XS語法的基礎和應用可以閱覽。###"}
{"prompt": "請教設定MACD提醒雷達策略腳本語法?\n\n###\n\n", "completion": " MACD中的柱狀圖值是OSC值。\n\n您可以參考內建的 DIF-MACD由正轉負 和 DIF-MACD由負轉正 警示腳本。\n\n關於如何設定策略雷達，您可以參考教學說明。###"}
{"prompt": "請問如何找出一段時間(每天盤中)的高低價?\n\n###\n\n", "completion": " 您可以在指定時間重置變數即可。\n\n舉例來說:\n\nif time = 090100 then begin\n\n    value1 = high;\n\n    value2 = low;\n\n    end;\n\n \n\nif value1 < high then value1 = high;\n\nif value2 > low then value2 =low;\n\n這樣 value1 和 value2 就會是 090100 以後的高低點。###"}
{"prompt": "篩選股(多頭，穩定微震幅)?\n\n###\n\n", "completion": " 近n日開盤在均線h檔附近\n\n最簡單的作法是您在腳本中設定參數 n, h 和1檔是多少元。\n\n舉例來說:\n\ninput: _n(3, \"幾日\"), _h(2, \"幾檔\"), _p(0.5, \"1檔多少元\"), _len(5, \"MA期數\");\n\nvalue1 = average(close, _len);\n\ncondition1 = trueall(close >= (value1 - (_p * _h)) and close <= (value1 + (_p * _h)), _n);\n\nif condition1 then ret = 1;\n\n \n\n近n日k棒當日上下漲幅皆在3%以上\n\n小幫手不太確認您所謂的上下漲幅是指什麼，當日只會有一個漲跌幅。\n\n如果您是指當日高點和當日低點的漲跌幅的話，那麼您只要用 high 和 low 來計算漲跌幅即可。\n\n舉例來說：\n\nvalue1 = 100 * (high - getfield(\"參考價\")) / getfield(\"參考價\");\n\nvalue2 = 100 * (low - getfield(\"參考價\")) / getfield(\"參考價\");\n\nif value1 > 3 and value2 > 3 then ret = 1;\n\n \n\n開低走高最後是殺低 由於選股只能使用日頻率，所以無法判斷。\n\n若您使用雷達的話，可以使用變數紀錄最高點和最低點的時間來判斷當日是O => H => L => C 還是 O => L => H => C。\n\n \n\n網站上有教學區，裡面有XS語法的基礎和應用。###"}
{"prompt": "若我要寫收盤價大於(   )MA且距離(   )%以上，收盤價小於(   )MA且距離(   )%以上，請問要如何編寫\n\n###\n\n", "completion": " 您可以使用 input 來設定參數。\n\n舉例來說:\n\ninput: len(10, \"MA期數\"), limitP(3, \"距離%數\");\n\n \n\nif close > average(close, len) amd close > (1 + (0.01 * limitP)) * average(close, len) then ret = 1;\n\n \n\n就會是收盤價大於 10MA 且距離 3% 以上。\n\n \n\n網站上有教學區，裡面有XS語法的基礎和應用可以閱覽。###"}
{"prompt": "該怎麼寫區間內(如30天)K棒漲幅有超過8%?\n\n###\n\n", "completion": " 您可以使用[n] 的方式取得前n期的資訊，所以使用在日頻率的話:\n\nvalue1 = 100 * (close - close[30]) / close[30];\n\nif value1 > 8 then ret = 1;\n\nvalue1 就會是收盤價和30根Bar前收盤價間的漲跌幅。###"}
{"prompt": "個股技術分析上可以標示出注意股、處置股、股東會、庫藏股等事件嗎？\n\n###\n\n", "completion": " getsymbolinfo 可以取得 注意股 和 處置股 的資訊，但這只有在回測的時候有歷史資料。\n\nXS 有提供 股東會日期、庫藏股開始日期 和 庫藏股結束日期。\n\n您可以在 XSHelp 上查詢可使用欄位。###"}
{"prompt": "警示或選股，加入上市或上櫃的日期當條件\n\n###\n\n", "completion": " 您可以參考 公司掛牌日期 欄位。\n\nXSHelp 上可以查詢函數欄位等相關資訊。###"}
{"prompt": "請問XS可以用什麼樣的語法可以回傳最近一個年度總營收?\n\n###\n\n", "completion": " 選股中可以使用 累計營收 欄位來取得當年累積的月營收總金額。\n\n您也可以使用 月營收 自行加總。###"}
{"prompt": "今年是111年,我想用語法回傳110年的年度總營收\n\n###\n\n", "completion": " 您可以用月營收自行加總。\n\n舉例來說:\n\nvalue1 = 0;\n\nvalue2 = 0;\n\nwhile year(getfielddate(\"月營收\", \"M\")[value1]) >= 2021 begin\n\n    if year(getfielddate(\"月營收\", \"M\")[value1]) = 2021 then value2 += getfield(\"月營收\", \"M\")[value1];\n\nvalue1 += 1;\n\nend;\n\n \n\nret = 1;\n\noutputField1(value2);\n\n這樣 value2 就會是 2021 年的月營收加總。###"}
{"prompt": "即時計算股票期貨商品總量\n\n###\n\n", "completion": " 如同小幫手所說，您可以用 getsymbolfield 取得。\n\nplot 函數可以用在指標腳本中讓其畫出指定數值。\n\nvalue1 = getsymbolfield(\"FICDF*1.TF\", \"Volume\") + getsymbolfield(\"FIDHF*1.TW\", \"Volume\");\n\nplot1(value1);###"}
{"prompt": "是否有類似陣列或dict的功能?\n\n###\n\n", "completion": " 您可以參考 array 功能。\n\n網站上有教學區，裡面有XS語法的基礎和應用可以閱覽。\n\nXSHelp上可以查詢函數和欄位說明。###"}
{"prompt": "如何畫一條依斜率正負顯示不同顏色的月線?\n\n###\n\n", "completion": " 除了可以在編輯器裡面設定外，技術線圖上也可以。\n\n圖上右鍵 => 指標設定 => 座標範圍 裡面可以調整座標軸。\n\n細節可以參考附圖。###"}
{"prompt": "如何在日線圖計算 60分K的EMA值 畫出EMA均線\n\n###\n\n", "completion": " xf 和 xfmin 的跨頻率函數只能由小頻率跨到大頻率。\n\n目前沒有內建的函數可以計算大頻率跨到小頻率的EMA值。\n\n如果要計算的話，您可以在每根Bar時計算所需前期值長度的60分鐘頻率資料。###"}
{"prompt": "XS語法如何取得前一天的月線(20MA)資料\n\n###\n\n", "completion": " 您可以使用 [n] 的方式來取得前n期的值。\n\n舉例來說，在日頻率上運算的話:\n\nvalue1 = average(close, 20);\n\nvalue1[1] 就會是前一期(日)的 20MA。###"}
{"prompt": "如何畫出前1日、前2日高低點水平線向右延伸?\n\n###\n\n", "completion": " 您可以使用 getfield 來取得不同頻率的資訊。\n\n舉例來說 getfield(\"High\", \"D\")[1] 就會是前一日的最高價、getfield(\"High\", \"D\")[2] 就會是前前日的最高價。\n\n如果您要取得前N日的最高價，可以使用 simplehighest 來取得，前2日的最高價就會是 simplehighest(getfield(\"High\", \"D\")[1], 1)。\n\n接下來只要用 plot 函數畫出即可。###"}
{"prompt": "選股中若開盤價高於5%，則不進場，請問這部分要怎麼設定\n\n###\n\n", "completion": " 開盤價高於5% 您指的是開盤價高於昨日收盤價 5% 嗎？\n\n如果是的話，選股的進場只要補上這個條件即可。\n\n舉例來說:\n\ncondition1 = open <= close[1] * 1.05;  //開盤價小於等於前日收盤價的1.05倍\n\ncondition2 = 其他條件;\n\nif condition1 and condition2 then ret = 1;###"}
{"prompt": "如何在1分鐘頻率下 抓取 15分鐘線框架的距今60根K棒的成交量加總?\n\n###\n\n", "completion": " summation(getfield(\"Volume\", \"15\"), 60) 就會是近60根15分鐘Bar的成交量加總###"}
{"prompt": "如何在1分鐘頻率下 抓取 在15分鐘框架的拒今60根K棒中 只要15分K的close> 100 就累加此根15分K的成交量 ?\n\n###\n\n", "completion": " 您需要用迴圈的方式，搭配條件來加總。\n\nvalue1 = 0;\n\nfor value2 = 0 to 59 begin\n\n    if getfield(\"Close\", \"15\")[value2] > 100 then value1 += getfield(\"Volume\", \"15\")[value2];\n\n    end;\n\n這樣 value1 就會是符合條件的15分鐘Bar成交量加總。###"}
{"prompt": "issessionFirstBar是否可以這樣寫? \n\n if issessionFirstBar then value1=highD(0);value2 = 0;\n\n###\n\n", "completion": " 可以用begin end包起來: if issessionFirstBar then\nbegin\n   value1=highD(0);\n   value2 = 0; \nend;###"}
{"prompt": "想要篩選，前1日到前n日有其中一天收盤價低於xxx  return;\n\n###\n\n", "completion": " 您可以參考 TrueAny 函數。###"}
{"prompt": "選股看舊的日期的資訊有辦法get n日之後的值嗎?\n\n###\n\n", "completion": " 不論哪個功能，XS都無法取得未來的資料。###"}
{"prompt": "不想 close[1] close[2] .... 一個一個key\n有for迴圈之類的語法可以使用?\n\n###\n\n", "completion": " for 迴圈 XS 也有。###"}
{"prompt": "想請問在1分k圖表上標示出 \"3天內 5分k最大成交量的高低點\"\n\n###\n\n", "completion": " 寫迴圈去抓過去最大量的位置，再用此值取得對應的高低點。\n\n舉例來說:\n\nvalue1 = 0;\n\nvalue2 = 0;\n\nfor value3 = 0 to 161 begin\n\n    if getfield(\"Volume\", \"5\")[value3] > value1 then begin\n\nvalue1 = getfield(\"Volume\", \"5\")[value3];\n\nvalue2 = value3;\n\nend;\n\n    end;\n\n \n\nvalue4 = getfield(\"High\", \"5\")[value2];\n\nvalue5 = getfield(\"low\", \"5\")[value2];\n\n這樣 value4 和 value5 就會是近162根5分鐘Bar中成交量最大的高低點。###"}
{"prompt": "如果要用進場的當根K棒的高低點來計算停損停利\n請問我該用甚麼語法來取的當根K棒的高低點?\n\n###\n\n", "completion": " 您可以在進場條件成立時用變數紀錄高低點，須注意若使用逐筆洗價的話變數要使用 intrabarpersist 來宣告。\n\n舉例來說:\n\nvar: intrabarpersist _high(0), intrabarpersist _low(0);\n\n \n\ncondition1 = 進場條件;\n\nif condition1 and position = 0 and filled = 0 then begin\n\n    setposition(1, market);\n\n    _high = high;\n\n    _low = low;\n\n    end;\n\n \n\n_high 和 _low 就會記錄進場當下的該根Bar高低點。###"}
{"prompt": "如果要當根K棒突破均線後 收盤價進場，使用以下此語法的執行結果會是價格碰到就進場\n請問我該如何修改才能是 當根K棒突破均線後 收盤價進場?\n\n###\n\n", "completion": " 如果您要該根Bar結束以後才判斷的話，可以取消勾選逐筆洗價，或是用上一根Bar來判斷。\n\n舉例來說:\n\ncondition1 = close cross over value1;\n\n \n\nif conditin1[1] then setposition(1, market);###"}
{"prompt": "想要抓昨日量能第三大的數值。但是9:00跟13:29分這兩根量能，不列入考量。這樣的語法要如何寫出來呢?\n\n###\n\n", "completion": " 您可以用陣列或變數來保存當日前三大的數值，並用 time 排除不想要的時間。\n\n舉例來說:\n\narray: top3_t[3](0), top3_y[3](0);\n\n \n\nif issessionfirstbar then begin\n\n    top3_y[1] = top3_t[1];\n\n    top3_y[2] = top3_t[2];\n\n    top3_y[3] = top3_t[3];\n\n    top3_t[1] = 0;\n\n    top3_t[2] = 0;\n\n    top3_t[3] = 0;\n\n    end;\n\n \n\nif (time <> 090000 or time <> 132900) and volume >= top3_t[1] then begin\n\n    top3_t[3] = top3_t[2];\n\n    top3_t[2] = top3_t[1];\n\n    top3_t[1] = volume;\n\n    end;\n\n \n\n這樣 top3_y 就會對應到昨日的前三大數值。###"}
{"prompt": "1.在1分鐘K當下\n2.股價創當日新高，同時成交量創當日新高\n\n4.量比 > 1，參數可以調整。\n\n###\n\n", "completion": " 您可以用變數保存當日最高價和量，然後在判斷時去取上一根Bar的資訊。\n\n另外量比也有資料欄位可以應用。\n\n舉例來說，用在1分鐘頻率上的話:\n\ninput: _limit(1);\n\nif date <> date[1] then begin\n\n    value1 = high;\n\n    value2 = volume;\n\n    end;\n\n \n\nif high > value1 then value1 = high;\n\nif volume > value2 then value2 = volume;\n\n \n\ncondition1 = high > value1[1] and volume > value2[1];\n\ncondition2 = getfield(\"量比\") > _limit;###"}
{"prompt": "在走勢圖上顯示日五均線\n\n###\n\n", "completion": " 您好，目前PC端可以自行輸入5MA的股價作為警示值，設定方式如下：\n\n1.設定雲端監控條件 2.在商品盤勢“設定”勾選「顯示警示價位」###"}
{"prompt": "盤中均價線斜率計算?\n\n###\n\n", "completion": " 您可以使用 LinearRegSlope 和 LinearRegAngle 來計算斜率跟弧度。\n\n並搭配使用 input 設定需要的斜率。\n\n網站上有教學區，裡面有XS語法的基礎和應用可以閱覽。\n\nhttps://www.xq.com.tw/School.aspx###"}
{"prompt": "Print 輸出內容\n\n###\n\n", "completion": " 就小幫手所知，目前要印出策略名稱的話要直接寫在print。\n\n另外商品代號名稱可以參考 symbol, symbolname。\n\n您可以在XSHelp上查詢欄位和函數。\n\n \n\n至於只print出ret = 1觸發的那一筆，只要讓腳本在條件觸發時print即可。\n\n舉例來說:\n\ncondition1 = 警示條件;\n\nif condition1 then begin\n\n    ret = 1;\n\n    print(\"印出資訊\");\n\n    end;\n\n需注意資料預讀筆數的運算也會印出，可以用 GetInfo 來限制。###"}
{"prompt": "請問小台指某價位到自動下單怎麼寫腳本\n\n###\n\n", "completion": " 舉例來說，您要在點數大於 13000 的時候下市價單的話，可以這樣寫：\n\ncondition1 = close > 13000; //成交價大於100\n\nif condition1 and position = 0 and filled = 0 then setposition(1, market); //如果空手且條件符合的話，下一張市價買單###"}
{"prompt": "請幫我用XS將昨日均價線顯示在今日的走勢圖主圖上\n\n###\n\n", "completion": " 您可以使用日頻率的均價欄位取前期值，就可以抓到昨日的均價。\n\n舉例來說：\n\nvalue1 = GetField(\"均價\", \"D\")[1];\n\nplot1(value1);\n\n \n\nvalue1 就會是昨日的均價。###"}
{"prompt": "請幫我用XS寫飆股壓回或高檔盤整，\n盤到接近均線時的線型\n\n###\n\n", "completion": " 最簡單的方法就是用收盤價和均線值的百分比，如果需要持續n天的話用 trueall ，任一天的話 trueany###"}